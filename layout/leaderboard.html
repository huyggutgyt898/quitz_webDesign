<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QUIZZKIT - Bảng Xếp Hạng</title>
    <script>
    if (!localStorage.getItem("loggedIn")) {
        window.location.href = "login.html";
    }
    </script>
    <link rel="stylesheet" href="Styles/layout.css" />
    <link rel="stylesheet" href="Styles/home.css" />
    <link rel="stylesheet" href="Styles/modelform.css" />
    <link rel="stylesheet" href="Styles/leaderboard.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="Scripts/auth.js"></script>
</head>
<body>

    <!-- OVERLAY -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- SIDEBAR -->
    <aside class="layout-sidebar" id="sidebar">
        <div class="layout-sidebar__user">
            <img src="Images/Avatar.jpg" alt="Avatar" class="layout-sidebar__user-avatar">
            <div class="layout-sidebar__user-info">
                <div class="layout-sidebar__username">Guest User</div>
                <div class="layout-sidebar__usertag">Thành viên</div>
            </div>
        </div>
        <a class="layout-sidebar__item" href="index.html"><i class="fas fa-home mr-2"></i> Trang chủ</a>
        <a class="layout-sidebar__item" href="createQuestions.html"><i class="fas fa-question-circle mr-2"></i> Tạo câu hỏi</a>
        <!-- THÊM LINK XEM CÂU HỎI VÀO SIDEBAR -->
        <a class="layout-sidebar__item" href="./showQuestion.html"><i class="fas fa-eye mr-2"></i> Xem câu hỏi</a>
        <!-- THÊM LINK KHO ĐỀ VÀO SIDEBAR (đã có sẵn nhưng để rõ hơn) -->
        <a class="layout-sidebar__item" href="questionLibrary.html"><i class="fas fa-folder-open mr-2"></i> Kho đề</a>
        <a class="layout-sidebar__item" href="profile.html"><i class="fas fa-user mr-2"></i> Tài khoản</a>
        <a class="layout-sidebar__item" href="settings.html"><i class="fas fa-cog mr-2"></i> Cài đặt</a>
    </aside>
    <!-- MAIN -->
    <div class="layout-main" id="mainContent" x-data="leaderboardData()">

        <!-- TOPBAR -->
        <header class="layout-topbar">
            <div class="layout-topbar__left">
                <!-- HAMBURGER MENU -->
                <div class="hamburger-menu" id="hamburgerMenu">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="layout-topbar__logo">QUIZZKIT</div>
            </div>
            <div class="layout-topbar__search">
                <input type="text" placeholder="Tìm kiếm khóa học, quiz..." />
            </div>
            <div class="layout-topbar__avatar">
                <img src="Images/Avatar.jpg" alt="avatar" id="avatarBtn"/>
                <div class="layout-topbar__avatar-dropdown" id="avatarDropdown">
                    <a href="settings.html">Cài đặt</a>
                    <a href="login.html" onclick="logoutUser(event)">Đăng xuất</a>
                </div>
            </div>
        </header>

        <!-- NAVBAR -->
        <nav class="layout-navbar">
            <a class="layout-navbar__item" href="index.html">Trang chủ</a>
            <!-- THÊM LINK KHO ĐỀ VÀO NAVBAR -->
            <a class="layout-navbar__item" href="questionLibrary.html">Kho đề</a>
            <div class="dropdown">
                <a class="layout-navbar__item " href="modelform.html">Môn học <i class="fas fa-chevron-down text-xs"></i></a>
        <div class="dropdown-content">
            <a href="modelform.html" class="dropdown-item">Tất cả</a>
            <a href="modelform.html?category=math" class="dropdown-item">Toán học</a>
            <a href="modelform.html?category=physics" class="dropdown-item">Vật lý</a>
            <a href="modelform.html?category=chemistry" class="dropdown-item">Hóa học</a>
            <a href="modelform.html?category=biology" class="dropdown-item">Sinh học</a>
            <a href="modelform.html?category=literature" class="dropdown-item">Ngữ văn</a>
            <a href="modelform.html?category=english" class="dropdown-item">Tiếng Anh</a>
            <a href="modelform.html?category=history" class="dropdown-item">Lịch sử</a>
            <a href="modelform.html?category=geography" class="dropdown-item">Địa lý</a>
            <a href="modelform.html?category=computer" class="dropdown-item">Tin học</a>
            <a href="modelform.html?category=civics" class="dropdown-item">GDCD</a>
        </div>
    </div>
            <a class="layout-navbar__item" href="createQuestions.html">Tạo câu hỏi</a>
            <!-- THÊM LINK XEM CÂU HỎI VÀO NAVBAR -->
           <!-- NAVBAR + DROPDOWN ĐẸP NHƯ SHOPEE -->
<div class="relative group">
    <a class="layout-navbar__item active flex items-center gap-1">
        Bảng xếp hạng <i class="fas fa-chevron-down text-xs ml-1"></i>
    </a>

    <div class="leaderboard-dropdown">
        <button @click="tab='players'"   :class="{ 'active': tab==='players' }">
            <span class="icon"><i class="fas fa-trophy text-yellow-600"></i></span>
            <div>
                <div class="title">Top Người Chơi</div>
                <div class="desc">Điểm cao nhất tuần</div>
            </div>
        </button>
        <button @click="tab='questions'" :class="{ 'active': tab==='questions' }">
            <span class="icon"><i class="fas fa-fire text-orange-600"></i></span>
            <div>
                <div class="title">Bài Giảng Hot Nhất</div>
                <div class="desc">Lượt chơi nhiều nhất</div>
            </div>
        </button>
        <button @click="tab='followers'" :class="{ 'active': tab==='followers' }">
            <span class="icon"><i class="fas fa-heart text-pink-600"></i></span>
            <div>
                <div class="title">Được Follow Nhiều Nhất</div>
                <div class="desc">Idol cộng đồng</div>
            </div>
        </button>
        <button @click="tab='creators'"  :class="{ 'active': tab==='creators' }">
            <span class="icon"><i class="fas fa-pen-nib text-purple-600"></i></span>
            <div>
                <div class="title">Tác Giả Nổi Bật</div>
                <div class="desc">Tạo quiz chất lượng</div>
            </div>
        </button>
    </div>
</div>

            <a class="layout-navbar__item" href="profile.html">Tài khoản</a>
        </nav>

        <!-- NỘI DUNG 4 BẢNG XẾP HẠNG -->
        <section class="layout-content py-10 px-6 max-w-7xl mx-auto">

            <!-- TAB 1: Top Người Chơi -->
            <div x-show="tab === 'players'" x-transition>
                <h1 class="text-4xl md:text-5xl font-bold text-center mb-4 text-gray-800">Top Người Chơi Xuất Sắc</h1>
                <p class="text-center text-gray-600 mb-12">Tuần này • Cập nhật 2 phút trước</p>

                <div class="space-y-6">
                    <template x-for="(p, i) in top10Players" :key="i">
                        <div class="bg-white rounded-2xl shadow-xl p-6 flex items-center hover:shadow-2xl transition-all duration-300"
                             :class="i===0 ? 'ring-4 ring-yellow-400 bg-gradient-to-r from-yellow-50' : i===1 ? 'ring-4 ring-gray-400 bg-gradient-to-r from-gray-50' : i===2 ? 'ring-4 ring-orange-400 bg-gradient-to-r from-orange-50' : ''">
                            <div class="w-24 text-center">
                                <div class="text-6xl font-black text-gray-200" x-text="i + 1"></div>
                                <template x-if="i < 3"><i class="fas fa-crown text-yellow-500 text-5xl -mt-3 block"></i></template>
                            </div>
                            <img :src="p.avatar" class="w-20 h-20 rounded-full ring-4 ring-white shadow-xl -ml-6">
                            <div class="flex-1 ml-8">
                                <div class="text-2xl font-bold" x-text="p.name"></div>
                                <div class="text-gray-500 text-lg" x-text="p.level"></div>
                            </div>
                            <div class="text-right pr-8">
                                <div class="text-4xl font-black text-orange-600" x-text="p.score.toLocaleString()"></div>
                                <div class="text-lg text-gray-500">điểm</div>
                            </div>
                        </div>
                    </template>

                    <!-- Vị trí của bạn -->
                    <div class="bg-gradient-to-r from-green-500 to-emerald-600 text-white rounded-2xl shadow-2xl p-10 flex items-center mt-16">
                        <div class="text-8xl font-black mr-10">#42</div>
                        <img src="Images/A2.jpg" class="w-24 h-24 rounded-full ring-4 ring-white shadow-2xl">
                        <div class="ml-10">
                            <div class="text-3xl font-bold">Bạn</div>
                            <div class="text-xl opacity-90">Nguyễn Văn Test</div>
                        </div>
                        <div class="ml-auto text-right">
                            <div class="text-6xl font-black">7.280</div>
                            <div class="text-2xl opacity-90">điểm</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- TAB 2: Câu Hỏi Hot -->
            <div x-show="tab === 'questions'" x-transition>
                <h1 class="text-4xl md:text-5xl font-bold text-center mb-4 text-gray-800">Bài Giảng Hot Nhất Tuần</h1>
                <p class="text-center text-orange-600 font-bold mb-12">Trending rần rần!</p>
                <div class="space-y-6">
                    <template x-for="(q, i) in hotQuestions" :key="i">
                        <div class="bg-white p-8 rounded-2xl shadow hover:shadow-2xl transition flex items-center justify-between">
                            <div class="flex items-center gap-8">
                                <div class="text-6xl font-black text-gray-200 w-24 text-center" x-text="i + 1"></div>
                                <div>
                                    <h3 class="text-2xl font-bold" x-text="q.title"></h3>
                                    <p class="text-gray-600 mt-2">by <span class="font-medium" x-text="q.author"></span> • <span x-text="q.plays"></span> lượt chơi</p>
                                </div>
                            </div>
                            <i class="fas fa-fire text-orange-500 text-6xl"></i>
                        </div>
                    </template>
                </div>
            </div>

            <!-- TAB 3: Follow -->
            <div x-show="tab === 'followers'" x-transition>
                <h1 class="text-4xl md:text-5xl font-bold text-center mb-4 text-gray-800">Được Follow Nhiều Nhất</h1>
                <p class="text-center text-pink-600 font-bold mb-12">Idol của QUIZZKIT</p>
                <div class="space-y-6">
                    <template x-for="(u, i) in top10Followers" :key="i">
                        <div class="bg-white p-8 rounded-2xl shadow hover:shadow-2xl transition flex items-center justify-between">
                            <div class="flex items-center gap-8">
                                <div class="text-6xl font-black text-gray-200 w-24 text-center" x-text="i + 1"></div>
                                <img :src="u.avatar" class="w-20 h-20 rounded-full ring-4 ring-pink-200">
                                <div>
                                    <div class="text-2xl font-bold" x-text="u.name"></div>
                                    <div class="text-gray-500">@<span x-text="u.username"></span></div>
                                </div>
                            </div>
                            <div class="text-right pr-8">
                                <div class="text-4xl font-black text-pink-600" x-text="u.followers.toLocaleString()"></div>
                                <div class="text-lg text-gray-500">followers</div>
                            </div>
                        </div>
                    </template>

                    <div class="bg-gradient-to-r from-pink-500 to-rose-600 text-white rounded-2xl shadow-2xl p-10 flex items-center mt-16">
                        <img src="Images/A2.jpg" class="w-24 h-24 rounded-full ring-4 ring-white shadow-2xl">
                        <div class="ml-10">
                            <div class="text-3xl font-bold">Bạn</div>
                            <div class="text-xl opacity-90">@yourusername</div>
                        </div>
                        <div class="ml-auto text-right">
                            <div class="text-6xl font-black">126</div>
                            <div class="text-2xl opacity-90">followers</div>
                        </div>
                        <i class="fas fa-heart text-white text-7xl ml-10"></i>
                    </div>
                </div>
            </div>

            <!-- TAB 4: Tác Giả -->
            <div x-show="tab === 'creators'" x-transition>
                <h1 class="text-4xl md:text-5xl font-bold text-center mb-4 text-gray-800">Tác Giả Nổi Bật</h1>
                <p class="text-center text-purple-600 font-bold mb-12">Những người tạo quiz chất lượng nhất</p>
                <div class="space-y-6">
                    <template x-for="(c, i) in top10Creators" :key="i">
                        <div class="bg-white p-8 rounded-2xl shadow hover:shadow-2xl transition flex items-center justify-between hover:translate-x-4">
                            <div class="flex items-center gap-8">
                                <div class="text-6xl font-black text-gray-200 w-24 text-center" x-text="i + 1"></div>
                                <img :src="c.avatar" class="w-20 h-20 rounded-full ring-4 ring-purple-200">
                                <div>
                                    <div class="text-2xl font-bold" x-text="c.name"></div>
                                    <p class="text-gray-600"><span x-text="c.quizzes"></span> quiz • <span x-text="c.totalPlays.toLocaleString()"></span> lượt chơi</p>
                                </div>
                            </div>
                            <i class="fas fa-star text-purple-500 text-6xl"></i>
                        </div>
                    </template>
                </div>
            </div>

        </section>

        <!-- FOOTER GỐC -->
        <footer class="layout-footer reveal">
            <div class="layout-footer-container">
                <div class="layout-footer-section"><h3>Giới thiệu</h3><p>QUIZZKIT là nền tảng cung cấp các câu đố vui và thử thách trí tuệ.</p></div>
                <div class="layout-footer-section"><h3>Liên hệ</h3><p>Email: <a href="mailto:nhatthanh@quizzz.vn">nhatthanh@quizzz.vn</a></p><p>Hotline: 0123 456 789</p></div>
                <div class="layout-footer-section"><h3>Liên kết nhanh</h3><p><a href="index.html">Trang chủ</a></p><p><a href="quiz.html">Câu hỏi</a></p><p><a href="leaderboard.html">Bảng xếp hạng</a></p><p><a href="login.html">Đăng nhập</a></p></div>
                <div class="layout-footer-section"><h3>Cộng đồng</h3><p><a href="https://facebook.com" target="_blank">Facebook</a></p><p><a href="https://instagram.com" target="_blank">Instagram</a></p><p><a href="https://discord.com" target="_blank">Discord</a></p></div>
            </div>
            <div class="layout-footer-bottom"><p>© 2025 QUIZZKIT. All rights reserved.</p></div>
        </footer>

        <!-- BACK TO TOP VÀNG KIM CÓ VÒNG ĐẦY DẦN SIÊU MƯỢT -->
        <div x-data="{ percent: 0 }"
             x-init="window.addEventListener('scroll', () => {
                 const s = document.documentElement.scrollTop || document.body.scrollTop;
                 const h = document.documentElement.scrollHeight - document.documentElement.clientHeight;
                 percent = h ? Math.round((s / h) * 100) : 0;
             })"
             class="fixed bottom-8 right-8 z-50">

            <button @click="window.scrollTo({top:0,behavior:'smooth'})"
                    x-show="percent > 20"
                    x-transition
                    class="w-16 h-16 rounded-full bg-gradient-to-br from-yellow-400 to-amber-600 shadow-2xl flex items-center justify-center text-white text-3xl hover:scale-110 transition-all relative overflow-hidden">

                <svg class="absolute inset-0 w-full h-full -rotate-90">
                    <circle cx="32" cy="32" r="28" stroke="#e5e7eb" stroke-width="6" fill="none"/>
                    <circle cx="32" cy="32" r="28" stroke="url(#gold)" stroke-width="6" fill="none"
                            stroke-dasharray="175.93" :stroke-dashoffset="175.93 - (175.93 * percent / 100)"
                            stroke-linecap="round" class="transition-all duration-300"/>
                    <defs>
                        <linearGradient id="gold">
                            <stop offset="0%" stop-color="#fbbf24"/>
                            <stop offset="100%" stop-color="#f59e0b"/>
                        </linearGradient>
                    </defs>
                </svg>
                <i class="fas fa-arrow-up"></i>
            </button>
        </div>

    </div>

    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="Scripts/leaderboard.js"></script>
    <script src="Scripts/layout.js"></script>
    <script src="Scripts/modelform.js"></script>
    <script src="Scripts/profile.js"></script>
    <script src="Scripts/auth.js"></script>
</body>
</html>
